Allow diffing against the staging area

Allow other directory diffing tools to be used such as kdiff3

Extend to merges as well as diffs
